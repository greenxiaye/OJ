<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发布订阅模式</title>
</head>

<body>

</body>

</html>

<script type="text/javascript">
    class EventEmitter {
        constructor() {
            this.events = {}
        }
        on(event, fn) {
            if (!this.events[event]) {
                this.events[event] = [fn]
            } else {
                this.events[event].push(fn)
            }
            console.log(this.events)
        }
        emit(event) {
            if (this.events[event]) {
                this.events[event].forEach(callback => callback())
            }
        }
    }

    let ans = function () {
        let sign1 = 0; let sign2 = 0;
        const emitter = new EventEmitter();
        emitter.on('add', function () { sign1++ });
        emitter.emit('add');
        emitter.on('add', function () { sign2++ });
        emitter.emit('add');
        console.log(sign1, sign2);
        const judge = sign1 === 2 && sign2 === 1;
        return judge
    }
    console.log(ans())

</script>
<!-- 描述
请补全JavaScript代码，完成"EventEmitter"类实现发布订阅模式。
注意：
1. 同一名称事件可能有多个不同的执行函数
2. 通过"on"函数添加事件
3. 通过"emit"函数触发事件 -->


<!-- //参考大佬的博客
//https://www.nowcoder.com/practice/569e1fd641be4fd797f12a28b763d709?tpId=274&tqId=39539&rp=1&ru=/exam/oj&qru=/exam/oj&sourceUrl=%2Fexam%2Foj%3Ftab%3D%25E5%2589%258D%25E7%25AB%25AF%25E7%25AF%2587%26topicId%3D274%26page%3D1&difficulty=undefined&judgeStatus=undefined&tags=&title=


// 考虑到同一名称事件可能有多个不同的执行函数，所以在构造函数中需要以对象的结构存放事件，核心步骤有：

// 构造函数中创建”events“对象变量用于存放所有的事件
// 添加”on“函数，用于订阅事件。当总事件中不存在此事件时创建新的事件数组，当存在时将”fn“函数添加在该事件对应数组中
// 添加”emit“函数，用于发布事件，遍历该事件下的函数数组并全部执行 -->